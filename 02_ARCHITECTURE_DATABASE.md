# ğŸ—ï¸ ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ« ĞĞ’Ğ¢ĞĞœĞĞ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞĞ“Ğ ĞšĞĞĞ¢Ğ•ĞĞ¢Ğ

## ĞĞ±Ñ‰Ğ°Ñ ÑÑ…ĞµĞ¼Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

```
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚     ğŸ‘¤ ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¬     â”‚
                                    â”‚  (Web Dashboard / Voice) â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚     ğŸŒ NGINX / CDN      â”‚
                                    â”‚   (Reverse Proxy, SSL)  â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                           â”‚                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   ğŸ–¥ï¸ FRONTEND         â”‚   â”‚   ğŸ™ï¸ VOICE API        â”‚   â”‚   ğŸ“± TELEGRAM BOT     â”‚
        â”‚   React Dashboard     â”‚   â”‚   Whisper + TTS       â”‚   â”‚   Aiogram             â”‚
        â”‚   Port: 3000          â”‚   â”‚   Port: 8001          â”‚   â”‚   Webhook             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                           â”‚                           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚   âš¡ BACKEND API        â”‚
                                    â”‚   FastAPI (Python)      â”‚
                                    â”‚   Port: 8000            â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚               â”‚                   â”‚                   â”‚               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ—„ï¸ PostgreSQL   â”‚ â”‚ ğŸ”´ Redis  â”‚ â”‚  ğŸ¤– AI SERVICES   â”‚ â”‚ ğŸ“¤ PUBLISHERS â”‚ â”‚ ğŸ’³ PAYMENTS   â”‚
â”‚   Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…     â”‚ â”‚ ĞšĞµÑˆ/Queue â”‚ â”‚  Claude, OpenAI   â”‚ â”‚ TikTok, YT    â”‚ â”‚ Stripe        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  ElevenLabs       â”‚ â”‚ Twitter, LI   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚  HeyGen, Runway   â”‚ â”‚ Telegram      â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚   ğŸ“ FILE STORAGE      â”‚
                                    â”‚   S3 / Cloudflare R2   â”‚
                                    â”‚   (Ğ²Ğ¸Ğ´ĞµĞ¾, ĞºĞ°Ñ€Ñ‚Ğ¸Ğ½ĞºĞ¸)    â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº

### Ğ’Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸ (Ñ Ğ¾Ğ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚       â”‚ Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ          â”‚ ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ»Ğ¸                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Backend         â”‚ Python + FastAPI    â”‚ Ğ›ÑƒÑ‡ÑˆĞ°Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° AI Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞº,      â”‚
â”‚                 â”‚                     â”‚ async, Ğ°Ğ²Ñ‚Ğ¾Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ API         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Frontend        â”‚ React + TypeScript  â”‚ ĞŸĞ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğ¹, Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞº,        â”‚
â”‚                 â”‚ + Tailwind CSS      â”‚ Ğ»ĞµĞ³ĞºĞ¾ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒ                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…     â”‚ PostgreSQL          â”‚ ĞĞ°Ğ´Ñ‘Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ, Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ,       â”‚
â”‚                 â”‚                     â”‚ JSON Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ´Ğ»Ñ Ğ³Ğ¸Ğ±ĞºĞ¾ÑÑ‚Ğ¸         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ĞšĞµÑˆ/ĞÑ‡ĞµÑ€ĞµĞ´Ğ¸     â”‚ Redis               â”‚ Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ĞºĞµÑˆ, Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸ Ğ·Ğ°Ğ´Ğ°Ñ‡,         â”‚
â”‚                 â”‚                     â”‚ pub/sub Ğ´Ğ»Ñ real-time               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Task Queue      â”‚ Celery + Redis      â”‚ Ğ¤Ğ¾Ğ½Ğ¾Ğ²Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ (Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ,          â”‚
â”‚                 â”‚                     â”‚ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ğ¤Ğ°Ğ¹Ğ»Ñ‹           â”‚ Cloudflare R2       â”‚ S3-ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ñ‹Ğ¹, Ğ´ĞµÑˆĞµĞ²Ğ»Ğµ AWS,        â”‚
â”‚                 â”‚                     â”‚ Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğ¹ egress                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ğ¥Ğ¾ÑÑ‚Ğ¸Ğ½Ğ³ Backend â”‚ Railway             â”‚ ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹, PostgreSQL          â”‚
â”‚                 â”‚                     â”‚ Ğ²ĞºĞ»ÑÑ‡Ñ‘Ğ½, Ğ°Ğ²Ñ‚Ğ¾ÑĞºĞµĞ¹Ğ»Ğ¸Ğ½Ğ³               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ğ¥Ğ¾ÑÑ‚Ğ¸Ğ½Ğ³ Frontendâ”‚ Vercel              â”‚ Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ğ´Ğ»Ñ React,               â”‚
â”‚                 â”‚                     â”‚ Ğ¼Ğ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Voice (STT)     â”‚ OpenAI Whisper      â”‚ Ğ›ÑƒÑ‡ÑˆĞµĞµ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ€Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ğ²Ğ°Ğ½Ğ¸Ñ       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Voice (TTS)     â”‚ ElevenLabs          â”‚ Ğ¡Ğ°Ğ¼Ñ‹Ğµ Ñ€ĞµĞ°Ğ»Ğ¸ÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ³Ğ¾Ğ»Ğ¾ÑĞ°           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ Ğ¡Ğ¥Ğ•ĞœĞ Ğ‘ĞĞ—Ğ« Ğ”ĞĞĞĞ«Ğ¥

### ER-Ğ´Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              DATABASE SCHEMA                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     users       â”‚       â”‚    niches       â”‚       â”‚   affiliates    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚       â”‚ id (PK)         â”‚       â”‚ id (PK)         â”‚
â”‚ email           â”‚       â”‚ name            â”‚       â”‚ name            â”‚
â”‚ password_hash   â”‚       â”‚ description     â”‚       â”‚ platform        â”‚
â”‚ name            â”‚       â”‚ status          â”‚       â”‚ url             â”‚
â”‚ role            â”‚       â”‚ potential_score â”‚       â”‚ commission_type â”‚
â”‚ settings (JSON) â”‚       â”‚ competition     â”‚       â”‚ commission_rate â”‚
â”‚ created_at      â”‚       â”‚ avg_ticket      â”‚       â”‚ avg_check       â”‚
â”‚ updated_at      â”‚       â”‚ created_at      â”‚       â”‚ cookie_days     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ niche_id (FK)   â”‚
         â”‚                         â”‚                â”‚ status          â”‚
         â”‚                         â”‚                â”‚ created_at      â”‚
         â”‚                         â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                         â”‚                         â”‚
         â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚    â”‚
         â”‚    â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    â”‚         â”‚   accounts      â”‚
         â”‚    â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚    â”‚         â”‚ id (PK)         â”‚
         â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ niche_id (FK)   â”‚
         â”‚              â”‚ platform        â”‚
         â”‚              â”‚ username        â”‚
         â”‚              â”‚ credentials(ENC)â”‚
         â”‚              â”‚ proxy_id (FK)   â”‚
         â”‚              â”‚ status          â”‚
         â”‚              â”‚ followers       â”‚
         â”‚              â”‚ health_score    â”‚
         â”‚              â”‚ last_posted_at  â”‚
         â”‚              â”‚ created_at      â”‚
         â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â”‚                       â”‚
         â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    â”‚                                     â”‚
         â”‚    â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
         â”‚    â”‚         â”‚    content      â”‚         â”‚
         â”‚    â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
         â”‚    â”‚         â”‚ id (PK)         â”‚         â”‚
         â”‚    â”‚         â”‚ niche_id (FK)   â”‚         â”‚
         â”‚    â”‚         â”‚ type            â”‚         â”‚
         â”‚    â”‚         â”‚ platform        â”‚         â”‚
         â”‚    â”‚         â”‚ title           â”‚         â”‚
         â”‚    â”‚         â”‚ script          â”‚         â”‚
         â”‚    â”‚         â”‚ media_url       â”‚         â”‚
         â”‚    â”‚         â”‚ thumbnail_url   â”‚         â”‚
         â”‚    â”‚         â”‚ status          â”‚         â”‚
         â”‚    â”‚         â”‚ scheduled_at    â”‚         â”‚
         â”‚    â”‚         â”‚ published_at    â”‚         â”‚
         â”‚    â”‚         â”‚ affiliate_id(FK)â”‚         â”‚
         â”‚    â”‚         â”‚ created_at      â”‚         â”‚
         â”‚    â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
         â”‚    â”‚                  â”‚                  â”‚
         â”‚    â”‚                  â”‚                  â”‚
         â”‚    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚    â”‚    â”‚                             â”‚  â”‚
         â”‚    â”‚    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚
         â”‚    â”‚    â”‚    â”‚  publications   â”‚      â”‚  â”‚
         â”‚    â”‚    â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚  â”‚
         â”‚    â”‚    â”‚    â”‚ id (PK)         â”‚      â”‚  â”‚
         â”‚    â”‚    â””â”€â”€â”€â–¶â”‚ content_id (FK) â”‚      â”‚  â”‚
         â”‚    â”‚         â”‚ account_id (FK) â”‚â—€â”€â”€â”€â”€â”€â”˜  â”‚
         â”‚    â”‚         â”‚ platform_post_idâ”‚         â”‚
         â”‚    â”‚         â”‚ url             â”‚         â”‚
         â”‚    â”‚         â”‚ status          â”‚         â”‚
         â”‚    â”‚         â”‚ published_at    â”‚         â”‚
         â”‚    â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
         â”‚    â”‚                  â”‚                  â”‚
         â”‚    â”‚                  â”‚                  â”‚
         â”‚    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
         â”‚    â”‚    â”‚                           â”‚    â”‚
         â”‚    â”‚    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
         â”‚    â”‚    â”‚    â”‚    metrics      â”‚    â”‚    â”‚
         â”‚    â”‚    â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚    â”‚
         â”‚    â”‚    â”‚    â”‚ id (PK)         â”‚    â”‚    â”‚
         â”‚    â”‚    â””â”€â”€â”€â–¶â”‚ publication_id  â”‚    â”‚    â”‚
         â”‚    â”‚         â”‚ views           â”‚    â”‚    â”‚
         â”‚    â”‚         â”‚ likes           â”‚    â”‚    â”‚
         â”‚    â”‚         â”‚ comments        â”‚    â”‚    â”‚
         â”‚    â”‚         â”‚ shares          â”‚    â”‚    â”‚
         â”‚    â”‚         â”‚ clicks          â”‚    â”‚    â”‚
         â”‚    â”‚         â”‚ engagement_rate â”‚    â”‚    â”‚
         â”‚    â”‚         â”‚ recorded_at     â”‚    â”‚    â”‚
         â”‚    â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
         â”‚    â”‚                                â”‚    â”‚
         â”‚    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
         â”‚    â”‚    â”‚                                â”‚
         â”‚    â”‚    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
         â”‚    â”‚    â”‚    â”‚     leads       â”‚         â”‚
         â”‚    â”‚    â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
         â”‚    â”‚    â”‚    â”‚ id (PK)         â”‚         â”‚
         â”‚    â””â”€â”€â”€â”€â”´â”€â”€â”€â–¶â”‚ account_id (FK) â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚              â”‚ content_id (FK) â”‚
         â”‚              â”‚ source_platform â”‚
         â”‚              â”‚ telegram_id     â”‚
         â”‚              â”‚ email           â”‚
         â”‚              â”‚ status          â”‚
         â”‚              â”‚ funnel_stage    â”‚
         â”‚              â”‚ created_at      â”‚
         â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â”‚                       â”‚
         â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚              â”‚   conversions   â”‚
         â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚              â”‚ id (PK)         â”‚
         â”‚              â”‚ lead_id (FK)    â”‚
         â”‚              â”‚ affiliate_id(FK)â”‚
         â”‚              â”‚ amount          â”‚
         â”‚              â”‚ commission      â”‚
         â”‚              â”‚ status          â”‚
         â”‚              â”‚ external_id     â”‚
         â”‚              â”‚ converted_at    â”‚
         â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚
         â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚              â”‚    proxies      â”‚
         â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ id (PK)         â”‚
                        â”‚ type            â”‚
                        â”‚ host            â”‚
                        â”‚ port            â”‚
                        â”‚ username        â”‚
                        â”‚ password        â”‚
                        â”‚ country         â”‚
                        â”‚ status          â”‚
                        â”‚ assigned_to(FK) â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### SQL ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ (Ğ¿Ğ¾Ğ»Ğ½Ğ°Ñ ÑÑ…ĞµĞ¼Ğ°)

```sql
-- =============================================
-- Ğ¤ĞĞ™Ğ›: migrations/001_initial_schema.sql
-- =============================================

-- Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ñ
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
CREATE EXTENSION IF NOT EXISTS "pgcrypto";

-- =============================================
-- Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ: users (Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹)
-- =============================================
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    name VARCHAR(100),
    role VARCHAR(20) DEFAULT 'user' CHECK (role IN ('admin', 'user', 'viewer')),
    settings JSONB DEFAULT '{
        "notifications": true,
        "timezone": "UTC",
        "language": "ru"
    }'::jsonb,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹
CREATE INDEX idx_users_email ON users(email);

-- =============================================
-- Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ: niches (Ğ½Ğ¸ÑˆĞ¸ Ğ´Ğ»Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°)
-- =============================================
CREATE TABLE niches (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    name VARCHAR(100) NOT NULL,
    slug VARCHAR(100) UNIQUE NOT NULL,
    description TEXT,
    status VARCHAR(20) DEFAULT 'active' CHECK (status IN ('active', 'paused', 'archived')),
    
    -- ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° Ğ½Ğ¸ÑˆĞ¸
    potential_score INTEGER CHECK (potential_score BETWEEN 1 AND 10),
    competition_level VARCHAR(20) CHECK (competition_level IN ('low', 'medium', 'high')),
    avg_product_price DECIMAL(10, 2),
    search_volume INTEGER,
    trend VARCHAR(20) CHECK (trend IN ('growing', 'stable', 'declining')),
    
    -- ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
    keywords JSONB DEFAULT '[]'::jsonb,
    target_audience JSONB DEFAULT '{}'::jsonb,
    content_pillars JSONB DEFAULT '[]'::jsonb,
    
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹
CREATE INDEX idx_niches_status ON niches(status);
CREATE INDEX idx_niches_slug ON niches(slug);

-- =============================================
-- Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ: affiliates (Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€ÑĞºĞ¸Ğµ Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ñ‹)
-- =============================================
CREATE TABLE affiliates (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    niche_id UUID REFERENCES niches(id) ON DELETE SET NULL,
    
    name VARCHAR(200) NOT NULL,
    platform VARCHAR(50) NOT NULL, -- ClickBank, Amazon, CJ, Direct
    url TEXT NOT NULL,
    affiliate_link TEXT,
    
    -- Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑÑ‹
    commission_type VARCHAR(20) NOT NULL CHECK (commission_type IN ('percentage', 'fixed', 'recurring')),
    commission_rate DECIMAL(5, 2) NOT NULL, -- Ğ¿Ñ€Ğ¾Ñ†ĞµĞ½Ñ‚ Ğ¸Ğ»Ğ¸ Ñ„Ğ¸ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ ÑÑƒĞ¼Ğ¼Ğ°
    avg_order_value DECIMAL(10, 2),
    epc DECIMAL(10, 4), -- Earnings Per Click
    cookie_duration_days INTEGER DEFAULT 30,
    
    -- ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾
    gravity_score DECIMAL(5, 2), -- Ğ´Ğ»Ñ ClickBank
    refund_rate DECIMAL(5, 2),
    landing_quality INTEGER CHECK (landing_quality BETWEEN 1 AND 10),
    
    -- Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ
    status VARCHAR(20) DEFAULT 'active' CHECK (status IN ('active', 'paused', 'expired', 'rejected')),
    notes TEXT,
    
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹
CREATE INDEX idx_affiliates_niche ON affiliates(niche_id);
CREATE INDEX idx_affiliates_status ON affiliates(status);
CREATE INDEX idx_affiliates_platform ON affiliates(platform);

-- =============================================
-- Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ: proxies (Ğ¿Ñ€Ğ¾ĞºÑĞ¸ Ğ´Ğ»Ñ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ¾Ğ²)
-- =============================================
CREATE TABLE proxies (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    
    type VARCHAR(20) NOT NULL CHECK (type IN ('http', 'https', 'socks5', 'residential')),
    host VARCHAR(255) NOT NULL,
    port INTEGER NOT NULL,
    username VARCHAR(100),
    password VARCHAR(255),
    
    country VARCHAR(2), -- ISO ĞºĞ¾Ğ´ ÑÑ‚Ñ€Ğ°Ğ½Ñ‹
    city VARCHAR(100),
    
    status VARCHAR(20) DEFAULT 'available' CHECK (status IN ('available', 'in_use', 'banned', 'expired')),
    
    -- ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸
    last_checked_at TIMESTAMP WITH TIME ZONE,
    response_time_ms INTEGER,
    success_rate DECIMAL(5, 2),
    
    expires_at TIMESTAMP WITH TIME ZONE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹
CREATE INDEX idx_proxies_status ON proxies(status);
CREATE INDEX idx_proxies_country ON proxies(country);

-- =============================================
-- Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ: accounts (Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ñ‹ ÑĞ¾Ñ†. ÑĞµÑ‚ĞµĞ¹)
-- =============================================
CREATE TABLE accounts (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    niche_id UUID REFERENCES niches(id) ON DELETE SET NULL,
    proxy_id UUID REFERENCES proxies(id) ON DELETE SET NULL,
    
    platform VARCHAR(30) NOT NULL CHECK (platform IN (
        'tiktok', 'youtube', 'twitter', 'linkedin', 
        'instagram', 'telegram', 'facebook', 'threads'
    )),
    username VARCHAR(100) NOT NULL,
    display_name VARCHAR(200),
    bio TEXT,
    profile_image_url TEXT,
    
    -- Ğ£Ñ‡Ñ‘Ñ‚Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (Ğ·Ğ°ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ)
    credentials JSONB NOT NULL, -- {access_token, refresh_token, api_key, etc}
    
    -- ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸
    followers INTEGER DEFAULT 0,
    following INTEGER DEFAULT 0,
    total_posts INTEGER DEFAULT 0,
    engagement_rate DECIMAL(5, 2),
    
    -- Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°
    health_score INTEGER DEFAULT 100 CHECK (health_score BETWEEN 0 AND 100),
    status VARCHAR(20) DEFAULT 'active' CHECK (status IN (
        'warming_up', 'active', 'paused', 'shadowbanned', 
        'suspended', 'banned', 'needs_verification'
    )),
    
    -- Ğ›Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹ Ğ¸ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ
    daily_post_limit INTEGER DEFAULT 5,
    posts_today INTEGER DEFAULT 0,
    last_posted_at TIMESTAMP WITH TIME ZONE,
    warmup_started_at TIMESTAMP WITH TIME ZONE,
    
    -- ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
    settings JSONB DEFAULT '{
        "auto_post": true,
        "posting_hours": [9, 12, 15, 18, 21],
        "timezone": "UTC"
    }'::jsonb,
    
    notes TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    
    UNIQUE(platform, username)
);

-- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹
CREATE INDEX idx_accounts_platform ON accounts(platform);
CREATE INDEX idx_accounts_niche ON accounts(niche_id);
CREATE INDEX idx_accounts_status ON accounts(status);
CREATE INDEX idx_accounts_health ON accounts(health_score);

-- =============================================
-- Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ: content (ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚/ĞºÑ€ĞµĞ°Ñ‚Ğ¸Ğ²Ñ‹)
-- =============================================
CREATE TABLE content (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    niche_id UUID REFERENCES niches(id) ON DELETE SET NULL,
    affiliate_id UUID REFERENCES affiliates(id) ON DELETE SET NULL,
    
    -- Ğ¢Ğ¸Ğ¿ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°
    type VARCHAR(30) NOT NULL CHECK (type IN (
        'short_video', 'long_video', 'image', 'carousel',
        'text_post', 'thread', 'story', 'article'
    )),
    target_platform VARCHAR(30) NOT NULL, -- Ğ”Ğ»Ñ ĞºĞ°ĞºĞ¾Ğ¹ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹ ÑĞ¾Ğ·Ğ´Ğ°Ğ½
    
    -- ĞšĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚
    title VARCHAR(500),
    hook TEXT, -- ĞŸĞµÑ€Ğ²Ñ‹Ğµ ÑĞ»Ğ¾Ğ²Ğ°/ĞºĞ°Ğ´Ñ€Ñ‹
    script TEXT, -- ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹
    caption TEXT, -- ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑÑŒ Ğº Ğ¿Ğ¾ÑÑ‚Ñƒ
    hashtags JSONB DEFAULT '[]'::jsonb,
    
    -- ĞœĞµĞ´Ğ¸Ğ° Ñ„Ğ°Ğ¹Ğ»Ñ‹
    media_url TEXT, -- ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ„Ğ°Ğ¹Ğ» (Ğ²Ğ¸Ğ´ĞµĞ¾/ĞºĞ°Ñ€Ñ‚Ğ¸Ğ½ĞºĞ°)
    thumbnail_url TEXT,
    additional_media JSONB DEFAULT '[]'::jsonb, -- Ğ”Ğ»Ñ ĞºĞ°Ñ€ÑƒÑĞµĞ»ĞµĞ¹
    
    -- CTA Ğ¸ ÑÑÑ‹Ğ»ĞºĞ¸
    call_to_action TEXT,
    link_url TEXT, -- ĞŸĞ°Ñ€Ñ‚Ğ½Ñ‘Ñ€ÑĞºĞ°Ñ ÑÑÑ‹Ğ»ĞºĞ°
    link_shortcode VARCHAR(50), -- bit.ly ĞºĞ¾Ğ´
    
    -- Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ
    status VARCHAR(20) DEFAULT 'draft' CHECK (status IN (
        'draft', 'generating', 'ready', 'scheduled', 
        'published', 'failed', 'archived'
    )),
    
    -- ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
    scheduled_for TIMESTAMP WITH TIME ZONE,
    
    -- AI Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
    ai_model VARCHAR(50), -- claude-3, gpt-4, etc
    generation_prompt TEXT,
    generation_cost DECIMAL(10, 4),
    
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹
CREATE INDEX idx_content_niche ON content(niche_id);
CREATE INDEX idx_content_status ON content(status);
CREATE INDEX idx_content_type ON content(type);
CREATE INDEX idx_content_platform ON content(target_platform);
CREATE INDEX idx_content_scheduled ON content(scheduled_for) WHERE status = 'scheduled';

-- =============================================
-- Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ: publications (Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸)
-- =============================================
CREATE TABLE publications (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    content_id UUID NOT NULL REFERENCES content(id) ON DELETE CASCADE,
    account_id UUID NOT NULL REFERENCES accounts(id) ON DELETE CASCADE,
    
    -- Ğ˜Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹
    platform_post_id VARCHAR(255), -- ID Ğ¿Ğ¾ÑÑ‚Ğ° Ğ½Ğ° Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğµ
    platform_url TEXT, -- ĞŸÑ€ÑĞ¼Ğ°Ñ ÑÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° Ğ¿Ğ¾ÑÑ‚
    
    -- Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ
    status VARCHAR(20) DEFAULT 'pending' CHECK (status IN (
        'pending', 'publishing', 'published', 
        'failed', 'deleted', 'removed_by_platform'
    )),
    error_message TEXT,
    retry_count INTEGER DEFAULT 0,
    
    -- Ğ’Ñ€ĞµĞ¼Ñ
    scheduled_at TIMESTAMP WITH TIME ZONE,
    published_at TIMESTAMP WITH TIME ZONE,
    
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹
CREATE INDEX idx_publications_content ON publications(content_id);
CREATE INDEX idx_publications_account ON publications(account_id);
CREATE INDEX idx_publications_status ON publications(status);
CREATE INDEX idx_publications_published ON publications(published_at);

-- =============================================
-- Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ: metrics (Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¹)
-- =============================================
CREATE TABLE metrics (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    publication_id UUID NOT NULL REFERENCES publications(id) ON DELETE CASCADE,
    
    -- ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸
    views INTEGER DEFAULT 0,
    impressions INTEGER DEFAULT 0,
    reach INTEGER DEFAULT 0,
    
    -- Ğ’Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ
    likes INTEGER DEFAULT 0,
    comments INTEGER DEFAULT 0,
    shares INTEGER DEFAULT 0,
    saves INTEGER DEFAULT 0,
    
    -- Ğ’Ğ¾Ğ²Ğ»ĞµÑ‡Ñ‘Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ
    engagement_rate DECIMAL(5, 2),
    avg_watch_time_seconds INTEGER,
    completion_rate DECIMAL(5, 2), -- % Ğ´Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€Ğ¾Ğ²
    
    -- ĞšĞ¾Ğ½Ğ²ĞµÑ€ÑĞ¸Ğ¸ (ĞµÑĞ»Ğ¸ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ)
    clicks INTEGER DEFAULT 0,
    ctr DECIMAL(5, 4), -- Click-Through Rate
    
    -- ĞšĞ¾Ğ³Ğ´Ğ° Ğ·Ğ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ¾
    recorded_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹
CREATE INDEX idx_metrics_publication ON metrics(publication_id);
CREATE INDEX idx_metrics_recorded ON metrics(recorded_at);

-- ĞŸĞ°Ñ€Ñ‚Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾ Ğ¼ĞµÑÑÑ†Ğ°Ğ¼ (Ğ´Ğ»Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… Ğ¾Ğ±ÑŠÑ‘Ğ¼Ğ¾Ğ²)
-- CREATE TABLE metrics_2024_01 PARTITION OF metrics
--     FOR VALUES FROM ('2024-01-01') TO ('2024-02-01');

-- =============================================
-- Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ: leads (Ğ»Ğ¸Ğ´Ñ‹/Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹)
-- =============================================
CREATE TABLE leads (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    
    -- Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº
    account_id UUID REFERENCES accounts(id) ON DELETE SET NULL,
    content_id UUID REFERENCES content(id) ON DELETE SET NULL,
    publication_id UUID REFERENCES publications(id) ON DELETE SET NULL,
    source_platform VARCHAR(30),
    
    -- ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
    telegram_user_id BIGINT,
    telegram_username VARCHAR(100),
    email VARCHAR(255),
    phone VARCHAR(50),
    name VARCHAR(200),
    
    -- Ğ’Ğ¾Ñ€Ğ¾Ğ½ĞºĞ°
    funnel_stage VARCHAR(30) DEFAULT 'new' CHECK (funnel_stage IN (
        'new', 'engaged', 'interested', 
        'considering', 'ready_to_buy', 'converted', 'lost'
    )),
    
    -- Ğ’Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ
    interactions JSONB DEFAULT '[]'::jsonb, -- Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹
    last_interaction_at TIMESTAMP WITH TIME ZONE,
    messages_sent INTEGER DEFAULT 0,
    messages_received INTEGER DEFAULT 0,
    
    -- Ğ¡ĞºĞ¾Ñ€Ğ¸Ğ½Ğ³
    lead_score INTEGER DEFAULT 0,
    
    -- ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
    utm_source VARCHAR(100),
    utm_medium VARCHAR(100),
    utm_campaign VARCHAR(100),
    landing_url TEXT,
    ip_address INET,
    user_agent TEXT,
    country VARCHAR(2),
    
    status VARCHAR(20) DEFAULT 'active' CHECK (status IN ('active', 'unsubscribed', 'blocked', 'converted')),
    
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹
CREATE INDEX idx_leads_telegram ON leads(telegram_user_id);
CREATE INDEX idx_leads_email ON leads(email);
CREATE INDEX idx_leads_stage ON leads(funnel_stage);
CREATE INDEX idx_leads_source ON leads(source_platform);
CREATE INDEX idx_leads_created ON leads(created_at);

-- =============================================
-- Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ: conversions (Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸/ĞºĞ¾Ğ½Ğ²ĞµÑ€ÑĞ¸Ğ¸)
-- =============================================
CREATE TABLE conversions (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    lead_id UUID REFERENCES leads(id) ON DELETE SET NULL,
    affiliate_id UUID REFERENCES affiliates(id) ON DELETE SET NULL,
    
    -- Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑÑ‹
    order_amount DECIMAL(10, 2) NOT NULL,
    commission_amount DECIMAL(10, 2) NOT NULL,
    currency VARCHAR(3) DEFAULT 'USD',
    
    -- Ğ˜Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹
    external_order_id VARCHAR(255), -- ID Ğ² Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€ĞºĞµ
    stripe_payment_id VARCHAR(255), -- Ğ•ÑĞ»Ğ¸ ÑĞ²Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚
    
    -- Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ
    status VARCHAR(20) DEFAULT 'pending' CHECK (status IN (
        'pending', 'approved', 'paid', 'refunded', 'chargedback'
    )),
    
    -- ĞÑ‚Ñ€Ğ¸Ğ±ÑƒÑ†Ğ¸Ñ
    attribution_model VARCHAR(30) DEFAULT 'last_click',
    click_id VARCHAR(255),
    
    converted_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    paid_at TIMESTAMP WITH TIME ZONE,
    
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹
CREATE INDEX idx_conversions_lead ON conversions(lead_id);
CREATE INDEX idx_conversions_affiliate ON conversions(affiliate_id);
CREATE INDEX idx_conversions_status ON conversions(status);
CREATE INDEX idx_conversions_date ON conversions(converted_at);

-- =============================================
-- Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ: expenses (Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ñ‹ Ğ½Ğ° API Ğ¸ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹)
-- =============================================
CREATE TABLE expenses (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    
    category VARCHAR(50) NOT NULL CHECK (category IN (
        'ai_api', 'hosting', 'proxy', 'video_generation',
        'voice_generation', 'storage', 'other'
    )),
    service_name VARCHAR(100) NOT NULL, -- Claude, OpenAI, ElevenLabs, etc
    
    amount DECIMAL(10, 4) NOT NULL,
    currency VARCHAR(3) DEFAULT 'USD',
    
    description TEXT,
    
    -- Ğ¡Ğ²ÑĞ·ÑŒ Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ¾Ğ¼ (ĞµÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ)
    content_id UUID REFERENCES content(id) ON DELETE SET NULL,
    
    period_start DATE,
    period_end DATE,
    
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹
CREATE INDEX idx_expenses_category ON expenses(category);
CREATE INDEX idx_expenses_service ON expenses(service_name);
CREATE INDEX idx_expenses_date ON expenses(created_at);

-- =============================================
-- Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ: scheduled_tasks (Ğ·Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸)
-- =============================================
CREATE TABLE scheduled_tasks (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    
    task_type VARCHAR(50) NOT NULL CHECK (task_type IN (
        'publish_content', 'generate_content', 'fetch_metrics',
        'warm_up_account', 'send_funnel_message', 'check_health'
    )),
    
    -- Ğ¡Ğ²ÑĞ·Ğ°Ğ½Ğ½Ñ‹Ğµ ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚Ğ¸
    content_id UUID REFERENCES content(id) ON DELETE CASCADE,
    account_id UUID REFERENCES accounts(id) ON DELETE CASCADE,
    lead_id UUID REFERENCES leads(id) ON DELETE CASCADE,
    
    -- ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹
    payload JSONB DEFAULT '{}'::jsonb,
    
    -- Ğ Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ
    scheduled_at TIMESTAMP WITH TIME ZONE NOT NULL,
    priority INTEGER DEFAULT 5 CHECK (priority BETWEEN 1 AND 10),
    
    -- Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ
    status VARCHAR(20) DEFAULT 'pending' CHECK (status IN (
        'pending', 'processing', 'completed', 'failed', 'cancelled'
    )),
    
    attempts INTEGER DEFAULT 0,
    max_attempts INTEGER DEFAULT 3,
    last_error TEXT,
    
    started_at TIMESTAMP WITH TIME ZONE,
    completed_at TIMESTAMP WITH TIME ZONE,
    
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹
CREATE INDEX idx_tasks_scheduled ON scheduled_tasks(scheduled_at) WHERE status = 'pending';
CREATE INDEX idx_tasks_status ON scheduled_tasks(status);
CREATE INDEX idx_tasks_type ON scheduled_tasks(task_type);

-- =============================================
-- Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ: audit_log (Ğ»Ğ¾Ğ³ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹)
-- =============================================
CREATE TABLE audit_log (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    user_id UUID REFERENCES users(id) ON DELETE SET NULL,
    
    action VARCHAR(100) NOT NULL,
    entity_type VARCHAR(50),
    entity_id UUID,
    
    old_values JSONB,
    new_values JSONB,
    
    ip_address INET,
    user_agent TEXT,
    
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹
CREATE INDEX idx_audit_user ON audit_log(user_id);
CREATE INDEX idx_audit_action ON audit_log(action);
CREATE INDEX idx_audit_entity ON audit_log(entity_type, entity_id);
CREATE INDEX idx_audit_date ON audit_log(created_at);

-- =============================================
-- Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ˜ Ğ˜ Ğ¢Ğ Ğ˜Ğ“Ğ“Ğ•Ğ Ğ«
-- =============================================

-- ĞĞ²Ñ‚Ğ¾Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ updated_at
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ language 'plpgsql';

-- ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ÑĞµĞ¼ Ñ‚Ñ€Ğ¸Ğ³Ğ³ĞµÑ€ ĞºĞ¾ Ğ²ÑĞµĞ¼ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°Ğ¼ Ñ updated_at
CREATE TRIGGER update_users_updated_at BEFORE UPDATE ON users
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
    
CREATE TRIGGER update_niches_updated_at BEFORE UPDATE ON niches
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
    
CREATE TRIGGER update_accounts_updated_at BEFORE UPDATE ON accounts
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
    
CREATE TRIGGER update_content_updated_at BEFORE UPDATE ON content
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
    
CREATE TRIGGER update_leads_updated_at BEFORE UPDATE ON leads
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

-- Ğ¡Ğ±Ñ€Ğ¾Ñ ÑÑ‡Ñ‘Ñ‚Ñ‡Ğ¸ĞºĞ° Ğ¿Ğ¾ÑÑ‚Ğ¾Ğ² ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ
CREATE OR REPLACE FUNCTION reset_daily_post_counts()
RETURNS void AS $$
BEGIN
    UPDATE accounts SET posts_today = 0;
END;
$$ LANGUAGE plpgsql;

-- =============================================
-- VIEWS (Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ´Ğ»Ñ ÑƒĞ´Ğ¾Ğ±ÑÑ‚Ğ²Ğ°)
-- =============================================

-- ĞĞ±Ñ‰Ğ°Ñ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ğ¾ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°Ğ¼
CREATE VIEW v_account_stats AS
SELECT 
    a.id,
    a.platform,
    a.username,
    a.followers,
    a.status,
    a.health_score,
    n.name as niche_name,
    COUNT(DISTINCT p.id) as total_publications,
    COALESCE(SUM(m.views), 0) as total_views,
    COALESCE(SUM(m.likes), 0) as total_likes,
    COALESCE(AVG(m.engagement_rate), 0) as avg_engagement
FROM accounts a
LEFT JOIN niches n ON a.niche_id = n.id
LEFT JOIN publications p ON p.account_id = a.id AND p.status = 'published'
LEFT JOIN metrics m ON m.publication_id = p.id
GROUP BY a.id, a.platform, a.username, a.followers, a.status, a.health_score, n.name;

-- Ğ’Ğ¾Ñ€Ğ¾Ğ½ĞºĞ° Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶
CREATE VIEW v_funnel_stats AS
SELECT
    date_trunc('day', l.created_at) as date,
    COUNT(*) as total_leads,
    COUNT(*) FILTER (WHERE funnel_stage IN ('interested', 'considering', 'ready_to_buy', 'converted')) as engaged,
    COUNT(*) FILTER (WHERE funnel_stage = 'converted') as converted,
    SUM(c.commission_amount) as revenue
FROM leads l
LEFT JOIN conversions c ON c.lead_id = l.id AND c.status IN ('approved', 'paid')
GROUP BY date_trunc('day', l.created_at)
ORDER BY date DESC;

-- Ğ¢Ğ¾Ğ¿ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°
CREATE VIEW v_top_content AS
SELECT 
    c.id,
    c.title,
    c.type,
    c.target_platform,
    n.name as niche,
    COUNT(p.id) as times_published,
    COALESCE(SUM(m.views), 0) as total_views,
    COALESCE(SUM(m.clicks), 0) as total_clicks,
    COALESCE(AVG(m.engagement_rate), 0) as avg_engagement,
    CASE WHEN SUM(m.views) > 0 
         THEN (SUM(m.clicks)::float / SUM(m.views) * 100)
         ELSE 0 END as ctr
FROM content c
LEFT JOIN niches n ON c.niche_id = n.id
LEFT JOIN publications p ON p.content_id = c.id
LEFT JOIN metrics m ON m.publication_id = p.id
WHERE c.status = 'published'
GROUP BY c.id, c.title, c.type, c.target_platform, n.name
ORDER BY total_views DESC;
```

---

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
content-automation-system/
â”‚
â”œâ”€â”€ ğŸ“‚ backend/                    # FastAPI Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
â”‚   â”œâ”€â”€ ğŸ“‚ app/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main.py               # Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ° FastAPI
â”‚   â”‚   â”œâ”€â”€ config.py             # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ api/               # API ÑĞ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚Ñ‹
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ deps.py           # Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ (auth, db)
â”‚   â”‚   â”‚   â”œâ”€â”€ v1/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ accounts.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ content.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ analytics.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ niches.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ affiliates.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ publications.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ leads.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ voice.py      # Jarvis API
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ webhooks.py   # Stripe, Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€ĞºĞ¸
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ core/              # Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ security.py       # JWT, Ğ¿Ğ°Ñ€Ğ¾Ğ»Ğ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ ai_agents.py      # ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹ Ñ€Ğ¾Ğ»ĞµĞ¹
â”‚   â”‚   â”‚   â””â”€â”€ scheduler.py      # ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ñ‰Ğ¸Ğº Ğ·Ğ°Ğ´Ğ°Ñ‡
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ services/          # Ğ¡ĞµÑ€Ğ²Ğ¸ÑÑ‹
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ ai/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ claude_service.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ openai_service.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ content_generator.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ niche_analyzer.py
â”‚   â”‚   â”‚   â”œâ”€â”€ media/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ video_generator.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ voice_generator.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ image_generator.py
â”‚   â”‚   â”‚   â”œâ”€â”€ social/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tiktok_publisher.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ youtube_publisher.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ twitter_publisher.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ linkedin_publisher.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ telegram_bot.py
â”‚   â”‚   â”‚   â”œâ”€â”€ analytics/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ metrics_collector.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ report_generator.py
â”‚   â”‚   â”‚   â””â”€â”€ payments/
â”‚   â”‚   â”‚       â”œâ”€â”€ stripe_service.py
â”‚   â”‚   â”‚       â””â”€â”€ affiliate_tracker.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ models/            # SQLAlchemy Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py
â”‚   â”‚   â”‚   â”œâ”€â”€ niche.py
â”‚   â”‚   â”‚   â”œâ”€â”€ account.py
â”‚   â”‚   â”‚   â”œâ”€â”€ content.py
â”‚   â”‚   â”‚   â”œâ”€â”€ publication.py
â”‚   â”‚   â”‚   â”œâ”€â”€ lead.py
â”‚   â”‚   â”‚   â””â”€â”€ conversion.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ schemas/           # Pydantic ÑÑ…ĞµĞ¼Ñ‹
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py
â”‚   â”‚   â”‚   â”œâ”€â”€ niche.py
â”‚   â”‚   â”‚   â”œâ”€â”€ account.py
â”‚   â”‚   â”‚   â”œâ”€â”€ content.py
â”‚   â”‚   â”‚   â””â”€â”€ analytics.py
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“‚ db/                # Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ session.py        # Ğ¡ĞµÑÑĞ¸Ğ¸ SQLAlchemy
â”‚   â”‚       â””â”€â”€ migrations/       # Alembic Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ workers/               # Celery Ğ²Ğ¾Ñ€ĞºĞµÑ€Ñ‹
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ celery_app.py
â”‚   â”‚   â”œâ”€â”€ tasks/
â”‚   â”‚   â”‚   â”œâ”€â”€ content_tasks.py
â”‚   â”‚   â”‚   â”œâ”€â”€ publish_tasks.py
â”‚   â”‚   â”‚   â”œâ”€â”€ metrics_tasks.py
â”‚   â”‚   â”‚   â””â”€â”€ funnel_tasks.py
â”‚   â”‚
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ docker-compose.yml
â”‚
â”œâ”€â”€ ğŸ“‚ frontend/                  # React Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
â”‚   â”œâ”€â”€ ğŸ“‚ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard/
â”‚   â”‚   â”‚   â”œâ”€â”€ Accounts/
â”‚   â”‚   â”‚   â”œâ”€â”€ Content/
â”‚   â”‚   â”‚   â”œâ”€â”€ Analytics/
â”‚   â”‚   â”‚   â”œâ”€â”€ Funnel/
â”‚   â”‚   â”‚   â””â”€â”€ Voice/           # Jarvis Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ pages/
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ hooks/
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ services/
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ store/            # Redux/Zustand
â”‚   â”‚   â””â”€â”€ App.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ Dockerfile
â”‚
â”œâ”€â”€ ğŸ“‚ telegram-bot/             # Telegram Ğ±Ğ¾Ñ‚ (Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾)
â”‚   â”œâ”€â”€ bot.py
â”‚   â”œâ”€â”€ handlers/
â”‚   â””â”€â”€ Dockerfile
â”‚
â”œâ”€â”€ ğŸ“‚ docs/                     # Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ
â”‚   â”œâ”€â”€ API.md
â”‚   â”œâ”€â”€ SETUP.md
â”‚   â””â”€â”€ DEPLOYMENT.md
â”‚
â”œâ”€â”€ ğŸ“‚ scripts/                  # Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹
â”‚   â”œâ”€â”€ seed_data.py
â”‚   â””â”€â”€ backup.sh
â”‚
â”œâ”€â”€ .env.example
â”œâ”€â”€ docker-compose.yml           # Ğ’ÑÑ‘ Ğ²Ğ¼ĞµÑÑ‚Ğµ
â””â”€â”€ README.md
```

---

## ğŸ”„ ĞŸĞ¾Ñ‚Ğ¾ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### 1. Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¸ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ĞŸĞĞ¢ĞĞš: Ğ“Ğ•ĞĞ•Ğ ĞĞ¦Ğ˜Ğ¯ ĞšĞĞĞ¢Ğ•ĞĞ¢Ğ                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Ğ¢Ğ Ğ˜Ğ“Ğ“Ğ•Ğ                     2. Ğ“Ğ•ĞĞ•Ğ ĞĞ¦Ğ˜Ğ¯                 3. ĞœĞ•Ğ”Ğ˜Ğ
   â”‚                             â”‚                            â”‚
   â”‚ â€¢ ĞŸĞ¾ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ             â”‚ â€¢ Claude Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚        â”‚ â€¢ ElevenLabs: Ğ³Ğ¾Ğ»Ğ¾Ñ
   â”‚ â€¢ Ğ ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº             â”‚   ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ Ğ¿Ğ¾ Ñ€Ğ¾Ğ»Ğ¸         â”‚ â€¢ HeyGen: Ğ²Ğ¸Ğ´ĞµĞ¾
   â”‚ â€¢ API Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ                â”‚   "copywriter"             â”‚ â€¢ Stability: ĞºĞ°Ñ€Ñ‚Ğ¸Ğ½ĞºĞ¸
   â”‚                             â”‚                            â”‚
   â–¼                             â–¼                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Celery  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Claude    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Media API  â”‚
â”‚  Task   â”‚               â”‚    API      â”‚              â”‚  (parallel) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                              â”‚
                                                              â–¼
4. Ğ¡ĞĞ¥Ğ ĞĞĞ•ĞĞ˜Ğ•                5. ĞŸĞ›ĞĞĞ˜Ğ ĞĞ’ĞĞĞ˜Ğ•           6. ĞŸĞ£Ğ‘Ğ›Ğ˜ĞšĞĞ¦Ğ˜Ğ¯
   â”‚                             â”‚                         â”‚
   â”‚ â€¢ content â†’ DB              â”‚ â€¢ Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸         â”‚ â€¢ Platform API
   â”‚ â€¢ media â†’ S3/R2             â”‚ â€¢ Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°        â”‚ â€¢ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ¾Ğ²
   â”‚                             â”‚ â€¢ scheduled_tasks       â”‚ â€¢ Retry Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ñ…
   â”‚                             â”‚                         â”‚
   â–¼                             â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PostgreSQL  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  Scheduler  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Publisher  â”‚
â”‚ + Storage   â”‚           â”‚             â”‚           â”‚   Service   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Ğ’Ğ¾Ñ€Ğ¾Ğ½ĞºĞ° Ğ»Ğ¸Ğ´Ğ¾Ğ²

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ĞŸĞĞ¢ĞĞš: Ğ’ĞĞ ĞĞĞšĞ ĞŸĞ ĞĞ”ĞĞ–                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Ğ¡ĞĞ¦Ğ¡Ğ•Ğ¢Ğ˜                    Ğ¢Ğ•Ğ›Ğ•Ğ“Ğ ĞĞœ                    ĞšĞĞĞ’Ğ•Ğ Ğ¡Ğ˜Ğ¯
       â”‚                          â”‚                           â”‚
       â”‚ ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ             â”‚ ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° Ğ½Ğ° Ğ±Ğ¾Ñ‚Ğ°          â”‚ ĞŸĞ¾ĞºÑƒĞ¿ĞºĞ° Ñ‡ĞµÑ€ĞµĞ·
       â”‚ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚            â”‚ Ğ¸Ğ»Ğ¸ ĞºĞ°Ğ½Ğ°Ğ»                 â”‚ Stripe/Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€ĞºÑƒ
       â”‚                          â”‚                           â”‚
       â–¼                          â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ĞšĞ»Ğ¸Ğº Ğ½Ğ°   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Telegram   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Stripe    â”‚
â”‚   ÑÑÑ‹Ğ»ĞºÑƒ    â”‚  redirect  â”‚    Bot      â”‚   ÑÑÑ‹Ğ»ĞºĞ°   â”‚  Checkout   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                          â”‚                           â”‚
       â”‚ UTM Ğ¼ĞµÑ‚ĞºĞ¸                â”‚ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ lead           â”‚ Webhook
       â”‚                          â”‚ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ² Ğ²Ğ¾Ñ€Ğ¾Ğ½ĞºÑƒ        â”‚ payment.success
       â”‚                          â”‚                           â”‚
       â–¼                          â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           PostgreSQL                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  leads  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ funnel  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ conversions â”‚               â”‚
â”‚  â”‚         â”‚         â”‚ messagesâ”‚         â”‚             â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ
       â”‚ Ğ¿Ğ¾ Ğ²Ğ¾Ñ€Ğ¾Ğ½ĞºĞµ (Celery)
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ğ’ĞĞ ĞĞĞšĞ Ğ¡ĞĞĞ‘Ğ©Ğ•ĞĞ˜Ğ™ (Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ğ”ĞµĞ½ÑŒ 0: ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğµ + Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ°Ñ Ñ†ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ                              â”‚
â”‚ Ğ”ĞµĞ½ÑŒ 1: ĞŸĞ¾Ğ»ĞµĞ·Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ #1                                            â”‚
â”‚ Ğ”ĞµĞ½ÑŒ 2: Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ ÑƒÑĞ¿ĞµÑ…Ğ° / ĞºĞµĞ¹Ñ                                          â”‚
â”‚ Ğ”ĞµĞ½ÑŒ 3: ĞŸĞ¾Ğ»ĞµĞ·Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ #2                                            â”‚
â”‚ Ğ”ĞµĞ½ÑŒ 4: ĞœÑĞ³ĞºĞ¾Ğµ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ                                             â”‚
â”‚ Ğ”ĞµĞ½ÑŒ 5: Ğ”ĞµĞ´Ğ»Ğ°Ğ¹Ğ½ / ÑĞºĞ¸Ğ´ĞºĞ°                                               â”‚
â”‚ Ğ”ĞµĞ½ÑŒ 7: ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ ÑˆĞ°Ğ½Ñ                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

*ĞÑ€Ñ‚ĞµÑ„Ğ°ĞºÑ‚ 2 Ğ¸Ğ· N. Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹: Backend API ĞºĞ¾Ğ´ (FastAPI).*
